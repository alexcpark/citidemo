(function(){ var scriptStr = 'b[a7]("Library Load Start: Core",3,"core");var by=JSON&&JSON.parse,bA=JSON&&JSON.stringify,bF="Process Instructions",bs="convertURL",bJ=/\\?/,bH=/(^https?:\\/\\/)(.*.badgeville\\.com(?::\\d*)?\\/cairo\\/v\\d+\\/[^\\/]*)\\/(sites\\/?[^?#]*)\\??([^#]*)/,bB=/^true|false$/,bq=/[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/,bn="Badgeville::jsonCache";aR={get:function(bM,bL){bM=aR[bM]?bM:500;bL=I(bL)===E.types.st?[bL]:I(bL)===E.types.ar?bL:[];return{errors:[{code:bM,status:aR[bM],messages:bL}]}},500:"Internal Server Error",6276001:"Missing or Invalid Arguments",6276002:"Source Invalid",6276003:"Unknown Link",6276004:"Invalid URL Provided",6276005:"Missing API Key"};E={types:{ar:I([]),bo:I(true),dt:I(new Date()),fu:I(function(){}),nu:I(0),nl:I(null),na:I(NaN),ob:I({}),st:I("")},jsonCache:null,extend:function(bL,bM){for(var bN in bM){if(bM[bN]&&I(bM[bN])===E.types.ob){bL[bN]=bL[bN]||{};E.extend(bL[bN],bM[bN])}else{bL[bN]=bM[bN]}}return bL},convertURL:function(bN){b[a7](bs+" Start: "+bN,A,this._id);var bV=this,bL=bN.match(bH),bR=-1,bT,bS,bQ,bO,bP,bM,bU;if(I(bL)!==E.types.ar||bL.length!==5){bT=\'An invalid Cairo URL was provided: "\'+bN+\'"\'}else{b[a7](bs+" Base URL: "+bL[2],1,bV._id);b[a7](bs+" Path Start: "+bL[3],1,bV._id);bV._urlHead=bL[1]+bL[2].replace(aS,"/");bQ=bL[3].replace(r,"").replace(aS,"/");bS=bQ.split("/");while(++bR<bS.length){if(bS[bR].length===0){continue}if(!bR){bV.path=bO=bS[bR]}else{if(bR%2){bV.ids[bO]=bS[bR]}else{bV.path+=("/"+(bO=bS[bR]))}}}b[a7](bs+" Path End: "+bV.path,1,bV._id);if(!bT){b[a7](bs+" URL query: "+bL[4],1,bV._id);bP=bL[4].split("&");bM=bP.length;while(bM--){if(bP[bM].length>0){bU=bP[bM].split("=");if(bU.length!==2){bT=\'An invalid query argument was provided: "\'+bP[bM]+\'"\';break}if(B.test(bU[1])){bU[1]=ap.parse(bU[1],(bU[0]!==an?false:G))}else{if(bU[1].indexOf(",")>-1){bU[1]=bU[1].split(",")}else{if(bU[1].match(bB)||bU[1].match(bq)){bU[1]=eval(bU[1])}}}bV.options[bU[0]]=bU[1]}}}}if(bT){b[a7](bs+" End - Fail: "+bT,1,bV._id);E.resolveReject[am](bV,aR.get(6276004,bT));return false}b[a7](bs+" End: "+bN,1,bV._id);return true},getUrl:function(bY){b[a7]("getUrl Start",A,this._id);var bP=this,bQ=a2[bP._id][l],bZ=["aggressive"].concat(bY||[]),bS=-1,bX=false,bR="?",bT,bO,bV,bU,bN,bW,bL,bM;bW=bP.path.split("/");bL=bP._urlHead||aK[aA]+aK[aI]+"/cairo/v"+aK[N]+"/"+aB.key;bM=[bL+(bW[0]==="sites"?"":"/sites")];b[a7]("getUrl Building URL: "+bM,1,bP._id);if(aB.sites_id&&bW[0]!=="sites"){bM[e]("/"+aB.sites_id)}b[a7]("getUrl Building URL: "+bM,1,bP._id);while(++bS<bW.length){if(bP.ids[bW[bS]]){bM[e]("/"+bW[bS]+"/"+bP.ids[bW[bS]])}else{if(bS===bW.length-1){bM[e]("/"+bW[bS])}else{bN="A resource path component was provided without a corresponding id.";b[a7]("getUrl End: "+bN,2,bP._id);return E.resolveReject[am](bP,aR.get(6276001,bN))}}b[a7]("getUrl Building URL: "+bM,1,bP._id)}for(bT in bP.options){b[a7]("getUrl Process Option: "+bT,1,bP._id);bV=bZ.length;bX=false;while(bV--){if(bZ[bV]===bT){bX=true}}if(bX||!aF[am](bP.options,bT)){b[a7]("getUrl Skipping Option: "+bT,1,bP._id);continue}bO=bP.options[bT];bU=I(bO);if(bU===E.types.st){bO=encodeURIComponent(bO)}if(bU===E.types.ar){bO=encodeURIComponent(bO.join(",")).replace(/%2C/g,",")}if(bU===E.types.ob){b[a7]("getUrl Attempting BVQL.stringify: "+bT,1,bP._id);try{bO=ap.stringify(bO)}catch(bV){bN=\'The "\'+bT+\'" option can not be included in the URL due to an unknown error.\';if(bV instanceof TypeError){bN="BVQL.stringify is not defined."}else{if(bV.message){bN=bV.message}}return E.resolveReject[am](bP,aR.get(6276001,bN))}}bU=I(bO);if(bU===E.types.st||bU===E.types.nu||bU===E.types.bo){if((""+bO).length>0){bM[e](bR+bT+"="+bO);bR="&";b[a7]("getUrl Building URL: "+bM,1,bP._id)}}else{bN=\'An invalid value type ("\'+bU+\'") was provided for the "\'+bT+\'" option.\';b[a7]("getUrl End: "+bN,2,bP._id);return E.resolveReject[am](bP,aR.get(6276001,bN))}}if(aB[aq]!==A&&I(bP.options[aq])!==E.types.bo){bM[e](bR+aq+"="+aB[aq]);b[a7]("getUrl Building URL: "+bM,1,bP._id)}b[a7]("getUrl End: "+bM,2,bP._id);return bM[aJ]("")},promiseState:function(bM,bR){if(bM){b[a7]("promiseState Start: "+bM,1,this._id)}var bT=this,bQ=a2[bT._id][l],bL=bQ.callbacks.progress,bS=bL&&bL.length,bN=bM&&bM!==bl[l],bO=-1,bP=bQ.progressEvent;if(bR){bP.meta=bR}if(bN&&bS){if(bP.loaded){bP.loaded=bM===bl.loadstart?0:bP.loaded+1}bP.type=bM;while(++bO<bS){if(I(bL[bO])===E.types.fu){bL[bO][am](bT,bP)}}}if(bM){b[a7]("promiseState End: "+bM,1,bT._id)}return bN?bQ._state=bM:bQ._state},getUtilityData:function(bS){b[a7]("getUtilityData Start: "+bS,A,this._id);var bO=this,bN=a2[bO._id][l],bL=bO instanceof a6,bM=bO instanceof ao,bQ=bM||bL?"All promises failed to retrieve data.":"A promise failed to retrieve data.",bR=[],bP=bO.resources.length;if(bS===bl.resolved){if(bM){bR=[a2[bN.resolved_id][l].data]}else{while(bP--){bR[bP]=a2[bO.resources[bP]._id][l].data}}}else{if(bS===bl.rejected){bR=aR.get(6276002,bQ)}}b[a7]("getUtilityData End",2,bO._id);return bR},pendingLibrary:function(){b[a7]("pendingLibrary check Start",A,this._id);var bL=a2[this._id][l];for(bp in bL.requires){if(aF[am](bL.requires,bp)){if(bL.requires[bp]===bl.loadstart){b[a7]("pendingLibrary check End - true : "+bp,2,this._id);return true}}}b[a7]("pendingLibrary check End - false",2,this._id);return false},getData:function(){b[a7]("getData Start",A,this._id);var bM=this,bN=a2[bM._id][l],bL;if(E.pendingLibrary[am](bM)===true){bN.needsData=true;b[a7]("getData Pending",1,bM._id);return false}if(bM._api&&!bM._urlHead){E[bs][am](bM,bM._api)}if(E.promiseState[am](bM)===bl.pending){bL=E.getUrl[am](bM);if(bL&&I(bL)===E.types.st){E.promiseState[am](bM,bl.loadstart);E.jsonp[am](bM,bL,function(bO){E.resolveReject[am](bM,bO)})}else{E.resolveReject[am](bM,aR.get(6276004,"A valid URL can not be formed."))}}b[a7]("getData End",2,bM._id)},jsonp:function(bL,bU){b[a7]("jsonp Start: "+bL,A,this._id);var bO=this,bT=aE[n].createElement(bm),bS=Math.floor(Math.random()*+new Date),bN=this._id?this._id+"."+bS:"subscription."+bS,bR=false,bM=false,bP=aE.addEventListener?"onload":"onreadystatechange",bV=function(){b[a7]("jsonp._fail",A,bO._id);b[a7]("End of Load - fail: "+bL,4,bN);if(!bM){bM=true;delete aE[aB[aT]]["_"+bS];if(bO instanceof x){E.resolveReject[am](bO,aR.get(500,"An unknown error has occured during the API call."))}b.send()}bT[C](bP,bQ)},bQ=function(){var bW=bT.readyState;if(!bW||/loaded|complete/.test(bW)){b[a7]("jsonp.scriptloaded",A,bO._id);if(!bR){bV()}}};aE[aB[aT]]["_"+bS]=function(bW){if(bW.errors){b[a7]("End of Load - fail: "+bL,4,bN)}else{b[a7]("End of Load - success: "+bT.src,4,bN)}b[a7]("jsonp.callback",A,bO._id);delete aE[aB[aT]]["_"+bS];bR=true;if(bW&&bU){bU(bW)}b.send();H.removeChild(bT)};bT.src=bL+(/\\?/.test(bL)?"&":"?")+"callback="+aB[aT]+"._"+bS;bT.acync=true;bT[bc](bP,bQ);bT.onerror=bV;b[a7]("Start of load",A,bN);H.appendChild(bT);b[a7]("jsonp child appended",2,bO._id)},resolveReject:function(bP){b[a7]("resolveReject Start",2,this._id);var bT=this,bS=a2[bT._id][l],bL=bP.errors?bl.rejected:bl.resolved,bQ=bL===bl.resolved?ah:bL===bl.rejected?q:null,bO=bS.callbacks[bQ],bR=bS.callbacks.always,bN=bT.path?bT.type:A,bM;if(E.promiseState[am](bT)!==bL){bS.data=bP||bS.data;if(bS.data&&E.promiseState[am](bT)!==bl.executing&&E.promiseState[am](bT)!==bl.loadend){b[a7]("resolveReject State: "+bL,A,bT._id);bS.status=bL;E.promiseState[am](bT,bL);E.promiseState[am](bT,bl.executing);if(bO&&bO.length){while(bM=bO.shift()){bM.apply(bT,bS.data.length?bS.data:[bS.data])}}if(bR&&bR.length){while(bM=bR.shift()){bM.apply(bT,bS.data.length?bS.data:[bS.data])}}E.promiseState[am](bT,bl.loadend)}}b[a7]("resolveReject End",2,bT._id)},removeCallback:function(bM,bQ){b[a7]("removeCallback Start: "+bM,1,this._id);var bO=this,bN=a2[bO._id][l],bP=bN.callbacks[bM],bL=bP?bP.length:0;while(bL--){if(bQ===bP[bL]){bP.splice(bL,1)}}b[a7]("removeCallback End: "+bM,1,bO._id)},processLibrary:function(bL){b[a7](bF+" Start: "+bL,A,bL);var bN=-1,bP=[],bS,bQ,bL,bM,bO;function bR(bU){var bT=a2[bU._id]._private;b[a7](bF+": Has "+bT.methodCalls.length+" methods",1,bU._id);if(bT.methodCalls.length){b[a7](bF+" Execute Methods",1,bU._id);bT.methodCalls.reverse();while(bM=bT.methodCalls.pop()){bU[bM.type].apply(bU,bM.args)}}else{if(bT.needsData){delete bT.needsData;E.getData[am](bU)}}}while(++bN<a2.ids.length){bS=a2[a2.ids[bN]]._public;bQ=a2[bS._id]._private;if(bQ._state===bl.pending){bO=false;b[a7](bF+": Checking ready state",2,bS._id);if(bQ.requires[bL]===bl.loadstart){bQ.requires[bL]=bl.loadend}bO=E.pendingLibrary[am](bS);if(bQ.requires.factory&&bL==="factory"){b[a7](bF+": Factory Promise",1,bS._id);bP.push(bS._id);continue}else{if(bO){b[a7](bF+": Waiting for more libraries",1,bS._id);continue}else{if(bQ.status===bl.rejected){b[a7](bF+": Promise is already rejected",1,bS._id);continue}else{if(aB.key||bS._api){if(bS instanceof x){b[a7](bF+": Promise is a Resource",1,bS._id);if(bS._api){E[bs][am](bS,bS._api)}if(bS.path||(!bS.ids.sites&&(bS.path="sites"))){if(I(bS.path)!==E.types.st){E.resolveReject[am](bS,aR.get(6276001,\'A string was not provided for the "path" argument.\'))}if(aB.aggressive||bS.options.aggressive){b[a7](bF+": aggressive Promise",1,bS._id);E.getData[am](bS)}}else{E.resolveReject[am](bS,aR.get(6276001,\'The "path" argument was not provided.\'))}}}else{E.resolveReject[am](bS,aR.get(6276005,\'The global "key" configuration was not defined.\'))}}}}bR(bS)}}if(bP.length>0){bN=-1;while(++bN<bP.length){bS=a2[bP[bN]]._public;bQ=a2[bS._id]._private;x[Q][bQ.factory.type].apply(bS,bQ.factory.args);bR(bS);b[a7]("Factory method processed: "+bQ.factory.type,2,bS._id)}}b[a7](bF+" End: "+bL,2,bL)}};function s(bL){return function(bM){b[a7]("callbackFactory: "+bL+" - Start",A,this._id);var bR=this,bP=a2[bR._id][l],bO=bP.factory&&a2[bP.factory.parent_id],bN=bP.status===bl.rejected&&bL===q||bP.status===bl.resolved&&bL===ah,bQ;if(I(bM)===E.types.fu){if(E.promiseState[am](bR)===bl.loadend&&bN){bQ=bR instanceof aZ&&I(bP.data)===E.types.ar?bP.data:[bP.data];bM.apply(bR,bQ)}else{(bP.callbacks[bL]=bP.callbacks[bL]||[])[e](bM);if(E.promiseState[am](bR)===bl.pending&&bL!==ba){if(bR instanceof x&&(!bO||bO.path===bR.path)){E.getData[am](bR)}else{if(bR instanceof aZ){bK[am](bR)}}}}}b[a7]("callbackFactory: "+bL+" - End",2,bR._id);return bR}}function bD(bN,bL,bM){b[a7]("then Start",1,this._id);if(I(bM)===E.types.fu){this.progress(bM)}if(I(bN)===E.types.fu){this.ok(bN)}if(I(bL)===E.types.fu){this.fail(bL)}b[a7]("then End",1,this._id);return this}function bx(bL){b[a7]("always Start",1,this._id);if(bL){this.ok(bL);this.fail(bL)}b[a7]("always End",1,this._id);return this}bf[Q].ok=s(ah);bf[Q].fail=s(q);bf[Q].progress=s(ba);bf[Q].then=bD;bf[Q].always=bx;function bK(){b[a7]("registerProgress Start",1,this._id);var bT=this,bL=a2[bT._id][l],bQ=bT instanceof ao,bR=bT instanceof a6,bN=bT instanceof c,bS={},bP=bT.resources.length,bU=bQ?q:ah,bM;function bO(bY){b[a7]("registerProgress.progressCB Start: "+bY,1,this._id);var bV=this,bZ=bY.type||bY,bW=bZ===bl.resolved,bX=bZ===bl.rejected,b1=bZ===bl.loadend,b2,b3,b0;bS[bZ]=++bS[bZ]||1;if(E.promiseState[am](bT)!==bl.loadend&&E.promiseState[am](bT)!==bl.executing){E.promiseState[am](bT,bl.progress,{resource:bV,progress:bY})}if(bQ){b2=bW&&E.promiseState[am](bT)!==bl.resolved;b3=bX&&bS[bl.rejected]===bT.resources.length;b0=b1&&(bV._id===bL.resolved_id||bS[bl.loadend]===bT.resources.length);bU=b2?ah:bU}else{if(bN){b3=bX&&E.promiseState[am](bT)!==bl.rejected;b2=bW&&bS[bl.resolved]===bT.resources.length;b0=b1&&(bV._id===bL.rejected_id||bS[bl.loadend]===bT.resources.length);bU=b3?q:bU}else{if(bR){bM=bM||bl.resolved;b3=bX&&bS[bl.rejected]===bT.resources.length;b0=b1&&(bV._id===bL.rejected_id||bS[bl.loadend]===bT.resources.length);bU=b3?q:bU}}}if(b2||b3){bL[bZ+"_id"]=bV._id;bM=bZ}else{if(b0){E.resolveReject[am](bT,E.getUtilityData[am](bT,bM))}}b[a7]("registerProgress.progressCB End: "+bY,1,bV._id)}E.promiseState[am](bT,bl.loadstart);if(!bP){E.resolveReject[am](bT,aR.get(6276001,"No resources were provided."))}while(bP--){(function(bV){var bW=bT.resources[bV],bX=a2[bW._id][l];bW.progress(function(bY){bO[am](bW,bY)});if(bX.status){bO[am](bW,bX.status);bO[am](bW,E.promiseState[am](bW))}else{if(E.promiseState[am](bW)===bl.pending&&bW.path){E.getData[am](bW);bW.options.aggressive=true;b[a7]("Option changed: aggressive set to true",1,bW._id)}}})(bP)}b[a7](this._id+" - registerProgress End",1)}b.get=function(bT,bL){function bW(bY){return bY}bL=bL||bW;var bX=this,bV=window.JSON?window.JSON:{stringify:bW},bO=window.console?window.console:false,bM=this.logs.slice().reverse(),bP=bM.length,bS=[],bN,bQ=0;if(!bO&&I(bT)!==E.types.fu){bT=2}function bU(bY){switch(parseInt(bT)){case 2:bX.logWin.document.write([bQ,". <b>",bY.created_at,"</b> (+",bY.main,(bY.id?" / "+bY.id+": +"+bY.offset:""),") : ",(typeof(bY.data)!==al?bV.stringify(bY.data):bY.data),"<br/>"][aJ](""));break;default:try{bO.log([bQ,". ",bY.created_at," (+",bY.main,(bY.id?" / "+bY.id+": +"+bY.offset:""),") : "][aJ](""),bY.data)}catch(bZ){}}}if(bT===2){if(!bX.logWin||bX.logWin.closed){bX.logWin=window.open("","BVSDK_Log","address=0,location=0,menubar=0,status=0,toolbar=0")}bX.logWin.document.write("------- "+(new Date)+" -------<br/>")}else{if(bT===3){try{bO.log("All promises: ",a2)}catch(bR){}}}while(bP--){bN=bL(bM[bP]);if(bN){if(I(bT)===E.types.fu){bS[e](bN)}else{bQ++;bU(bN)}}}if(I(bT)===E.types.fu){bT(bS)}};b.send=function(){};aE[aB[aT]].showLogs=function(bM){function bL(bO){var bP=!bM.id||new RegExp(bM.id).test(bO.id),bN=!bM.since||bM.since<bO.created_at;return bO.level>=bM.level&&bP&&bN?bO:false}if(I(bM)===E.types.nu||I(bM)===E.types.st){bM={id:bM,level:0}}bM=bM||{};bM.level=bM.level===G?3:bM.level;filter=bM.filter||bL;b.get(bM.target,filter);return a2};if(ad.length>0){b[a7]("Processing library queue: "+ad.join());while(Z=ad.pop()){E.processLibrary(Z)}}aV.core=bl.loadend;b[a7]("Library Load End: Core",4,"core");'; executeCode(scriptStr,"core"); })()